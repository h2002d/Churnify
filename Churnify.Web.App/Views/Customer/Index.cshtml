@model Churnify.Web.App.ViewModels.CustomerDetailViewModel

@{
    ViewBag.Title = "Customer: John Sienna #8502-005";
    var customer = Model == null ? null : Model.Customer;
}

<div class="page-wrapper">
    <div class="row">
        <div class="col-sm-6">
            <div class="tab">
                <button class="tablinks">Personal Info</button>
            </div>
            <div id="Personal" style="display:block;">
                <div class="card" id="personal_card">
                    <form class="form-horizontal">
                        <div class="card-body">
                            <h3 class="card-title">@customer.FirstName @customer.LastName  <b>#@customer.ClientCode</b></h3>
                            <div class="form-group row">
                                <label for="email1" class="col-sm-3 text-right control-label col-form-label">Birthdate</label>
                                <p class="col-sm-9 control-label col-form-label font-bold">
                                    @customer.BirthDate.ToShortDateString()
                                </p>
                            </div>
                            <div class="form-group row">
                                <label for="cono1" class="col-sm-3 text-right control-label col-form-label">Phone</label>
                                <p class="col-sm-9 control-label col-form-label font-bold">
                                    @customer.PhoneNumber <a href="#" title="Call to @customer.PhoneNumber"><i class="mdi mdi-phone-classic m-b-5 font-16"></i></a>
                                    <a href="#" title="Send SMS to @customer.PhoneNumber">  <i class="mdi mdi-email m-b-5 font-16"></i></a>
                                </p>
                            </div>
                            <div class="form-group row">
                                <label for="cono1" class="col-sm-3 text-right control-label col-form-label">Email</label>
                                <p class="col-sm-9 control-label col-form-label font-bold">
                                    @customer.Email  <a href="#" title="Send email to @customer.Email"><i class="mdi mdi-gmail m-b-5 font-16" style="color:red;"></i></a>
                                </p>
                            </div>
                        </div>
                        <div class="border-top">
                            <div class="card-body">
                                <button type="button" class="btn btn-primary">Edit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="tab">
                <button class="tablinks active" onclick="openTab(event, 'Tasks')">Tasks</button>
                <button class="tablinks" onclick="openTab(event, 'Ratings')">Ratings</button>
            </div>
            <div id="Tasks" class="tabcontent" style="display:block;">
                <div class="card" id="task_card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="zero_config" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>User</th>
                                        <th>Content</th>
                                        <th>Type</th>
                                        <th>Start date</th>
                                        <th>Last date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Tiger Nixon</td>
                                        <td>System Architect</td>
                                        <td>Edinburgh</td>
                                        <td>61</td>
                                        <td>2011/04/25</td>
                                        <td>$320,800</td>
                                    </tr>
                                    <tr>
                                        <td>Garrett Winters</td>
                                        <td>Accountant</td>
                                        <td>Tokyo</td>
                                        <td>63</td>
                                        <td>2011/07/25</td>
                                        <td>$170,750</td>
                                    </tr>
                                    <tr>
                                        <td>Ashton Cox</td>
                                        <td>Junior Technical Author</td>
                                        <td>San Francisco</td>
                                        <td>66</td>
                                        <td>2009/01/12</td>
                                        <td>$86,000</td>
                                    </tr>
                                    <tr>
                                        <td>Cedric Kelly</td>
                                        <td>Senior Javascript Developer</td>
                                        <td>Edinburgh</td>
                                        <td>22</td>
                                        <td>2012/03/29</td>
                                        <td>$433,060</td>
                                    </tr>
                                    <tr>
                                        <td>Airi Satou</td>
                                        <td>Accountant</td>
                                        <td>Tokyo</td>
                                        <td>33</td>
                                        <td>2008/11/28</td>
                                        <td>$162,700</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="border-top">
                            <div class="card-body">
                                <button type="button" class="btn btn-success">Create task</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="Ratings" class="tabcontent">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="zero_config" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>User</th>
                                        <th>Comment</th>
                                        <th>Rate</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Tiger Nixon</td>
                                        <td>System Architect</td>
                                        <td>Edinburgh</td>
                                        <td>61</td>
                                        <td>2011/04/25</td>
                                    </tr>
                                    <tr>
                                        <td>Garrett Winters</td>
                                        <td>Accountant</td>
                                        <td>Tokyo</td>
                                        <td>63</td>
                                        <td>2011/07/25</td>
                                    </tr>
                                    <tr>
                                        <td>Ashton Cox</td>
                                        <td>Junior Technical Author</td>
                                        <td>San Francisco</td>
                                        <td>66</td>
                                        <td>2009/01/12</td>
                                    </tr>
                                    <tr>
                                        <td>Cedric Kelly</td>
                                        <td>Senior Javascript Developer</td>
                                        <td>Edinburgh</td>
                                        <td>22</td>
                                        <td>2012/03/29</td>
                                    </tr>
                                    <tr>
                                        <td>Airi Satou</td>
                                        <td>Accountant</td>
                                        <td>Tokyo</td>
                                        <td>33</td>
                                        <td>2008/11/28</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="comment_container">

    </div>
</div>

@section Scripts{
    <script>
       $('#comment_container').load('/Comment/CustomerPartial?customerId=@customer.Id')

        /****************************************
         *       Basic Table                   *
         ****************************************/

        $(document).ready(function () {
            $('#zero_config').DataTable();
            $('#comments_table').DataTable();
        });
        function openTab(evt, cityName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>
}